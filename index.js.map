{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default function getImagesByQuery(query, page) {\n  const params = {\n    key: '53321063-39b236969f2c986560565235a',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  };\n  return axios\n    .get('https://pixabay.com/api/', { params })\n    .then(res => res.data);\n}\n","import SimpleLightbox from 'simplelightbox';\n\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more');\nconst galleryElem = document.querySelector('.gallery');\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  overlay: true,\n  overlayOpacity: 0.8,\n});\n\nexport function createGallery(images) {\n  const markup = imagesTemplate(images);\n  galleryElem.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n\nexport function clearGallery() {\n  galleryElem.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreButton.classList.add('hidden');\n}\n\nfunction imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\n\nfunction imageTemplate(image) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = image;\n  return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    <ul class=\"image-info\">\n      <li class=\"info-point\">\n        <p class=\"info-point-label\">Likes</p>\n        <p class=\"info-point-value\">${likes}</p>\n      </li>\n      <li class=\"info-point\">\n        <p class=\"info-point-label\">Views</p>\n        <p class=\"info-point-value\">${views}</p>\n      </li>\n      <li class=\"info-point\">\n        <p class=\"info-point-label\">Comments</p>\n        <p class=\"info-point-value\">${comments}</p>\n      </li>\n      <li class=\"info-point\">\n        <p class=\"info-point-label\">Downloads</p>\n        <p class=\"info-point-value\">${downloads}</p>\n      </li>\n    </ul>\n  </li>`;\n}\n","import iziToast from 'izitoast';\nimport getImagesByQuery from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nlet query;\nlet page;\nlet totalPages;\nconst form = document.querySelector('.form');\nconst loadMoreButton = document.querySelector('.load-more');\n\nform.addEventListener('submit', formSubmitHandler);\nloadMoreButton.addEventListener('click', loadMoreButtonHandler);\n\nasync function formSubmitHandler(e) {\n  e.preventDefault();\n  const queryCandidate = form.elements['search-text'].value.trim();\n  if (!queryCandidate) {\n    return;\n  }\n  query = queryCandidate;\n  page = 1;\n  hideLoadMoreButton();\n  clearGallery();\n  showLoader();\n  form.reset();\n  try {\n    const { hits: images, totalHits: totalImages } = await getImagesByQuery(\n      query,\n      page\n    );\n    totalPages = Math.ceil(totalImages / 15);\n    if (totalPages > 1) {\n      showLoadMoreButton();\n    }\n    images.length > 0\n      ? createGallery(images)\n      : showMessage(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n  } catch (err) {\n    console.error(err);\n  }\n  hideLoader();\n}\n\nasync function loadMoreButtonHandler() {\n  page += 1;\n}\n\nfunction showMessage(message) {\n  iziToast.show({\n    message: message,\n    position: 'topRight',\n    messageColor: '#FFFFFF',\n    backgroundColor: '#EF4040',\n    progressBarColor: '#B51B1B',\n    maxWidth: '432px',\n  });\n}\n"],"names":["getImagesByQuery","query","page","params","axios","res","loader","loadMoreButton","galleryElem","gallery","SimpleLightbox","createGallery","images","markup","imagesTemplate","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","imageTemplate","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","totalPages","form","formSubmitHandler","loadMoreButtonHandler","e","queryCandidate","totalImages","showMessage","err","message","iziToast"],"mappings":"owBAEe,SAASA,EAAiBC,EAAOC,EAAM,CACpD,MAAMC,EAAS,CACb,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACd,EACE,OAAOE,EACJ,IAAI,2BAA4B,CAAE,OAAAD,EAAQ,EAC1C,KAAKE,GAAOA,EAAI,IAAI,CACzB,CCbA,MAAMC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAc,SAAS,cAAc,UAAU,EAErD,IAAIC,EAAU,IAAIC,EAAe,aAAc,CAC7C,SAAU,GACV,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,QAAS,GACT,eAAgB,EAClB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASC,EAAeF,CAAM,EACpCJ,EAAY,mBAAmB,YAAaK,CAAM,EAClDJ,EAAQ,QAAO,CACjB,CAEO,SAASM,GAAe,CAC7BP,EAAY,UAAY,EAC1B,CAEO,SAASQ,GAAa,CAC3BV,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEO,SAASW,GAAa,CAC3BX,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEO,SAASY,GAAqB,CACnCX,EAAe,UAAU,OAAO,QAAQ,CAC1C,CAEO,SAASY,GAAqB,CACnCZ,EAAe,UAAU,IAAI,QAAQ,CACvC,CAEA,SAASO,EAAeF,EAAQ,CAC9B,OAAOA,EAAO,IAAIQ,CAAa,EAAE,KAAK,EAAE,CAC1C,CAEA,SAASA,EAAcC,EAAO,CAC5B,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,oCAC2BE,CAAa;AAAA,wCACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,sCAK5BC,CAAK;AAAA;AAAA;AAAA;AAAA,sCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,sCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,sCAIRC,CAAS;AAAA;AAAA;AAAA,QAI/C,CCnEA,IAAI3B,EACAC,EACA2B,EACJ,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCvB,EAAiB,SAAS,cAAc,YAAY,EAE1DuB,EAAK,iBAAiB,SAAUC,CAAiB,EACjDxB,EAAe,iBAAiB,QAASyB,CAAqB,EAE9D,eAAeD,EAAkBE,EAAG,CAClCA,EAAE,eAAc,EAChB,MAAMC,EAAiBJ,EAAK,SAAS,aAAa,EAAE,MAAM,OAC1D,GAAKI,EAGL,CAAAjC,EAAQiC,EACRhC,EAAO,EACPiB,IACAJ,IACAC,IACAc,EAAK,MAAK,EACV,GAAI,CACF,KAAM,CAAE,KAAMlB,EAAQ,UAAWuB,CAAW,EAAK,MAAMnC,EACrDC,EACAC,CACN,EACI2B,EAAa,KAAK,KAAKM,EAAc,EAAE,EACnCN,EAAa,GACfX,IAEFN,EAAO,OAAS,EACZD,EAAcC,CAAM,EACpBwB,EACE,0EACV,CACG,OAAQC,EAAK,CACZ,QAAQ,MAAMA,CAAG,CAClB,CACDpB,IACF,CAEA,eAAee,GAAwB,CACrC9B,GAAQ,CACV,CAEA,SAASkC,EAAYE,EAAS,CAC5BC,EAAS,KAAK,CACZ,QAASD,EACT,SAAU,WACV,aAAc,UACd,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,OACd,CAAG,CACH"}